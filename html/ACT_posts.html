<!DOCTYPE html>
<html>
    <head>
        <title>ACT load documentation</title>
        <meta charset="UTF-8">
        <style>
            body{
                margin: auto; /* Center horizontally */
                max-width: 700px; /* Set maximum width */
                width: 90%; /* Optional: Allow some flexibility on smaller screens */
                flex: 1; /* Allows the main content to expand to fill available space */
            }
            table {
                border-collapse: collapse; /* Collapse borders for single-line effect */
                border: 1px solid #ccc; /* Add a border to the table itself */
            }

            th, td {
                border: 1px solid #ccc; /* Add borders to table cells (th and td) */
                padding: 8px; /* Add some padding within cells */
                text-align: left; /* Default text alignment to the left */
            }

        </style>
    </head>
    <body>
        <h1>ACT Posts</h1>
        <p>This plugin provides a shortcode which can be configured to either:</p>
        <ul>
            <li>Display all posts together with controls to:
                <ul>
                    <li>select which category is displayed (or All)</li>
                    <li>control the sort order by:
                        <ul>
                            <li>Date (newset first)</li>
                            <li>Date (oldest first)</li>
                            <li>Author</li>
                        </ul>
                    </li>
                    <li>search posts for a free text string which my be either:
                        <ul>
                            <li>Exactly matched by putting the string in quotes</li>
                            <li>Treated as separate words any of which can be matched</li>
                        <ul>
                    </li>
                </ul> 
            </li>
            <li>Display all posts relating to a preconfigured category in descending date order</li>
            <li>Display custom post types, with special supports for:
                <ul>
                    <li>Team members - without control panel</li>
                    <li>Events - with reference date</li>
                </ul>
            </li>
            <li>
                Other custom post types with support for select ACF fields
            </li>
        </ul>
        <h2>Displaying posts for a single category</h2>
        <p>It is intended that each activity page will have a posts section for posts related to that category.
            The appropriate category for the activity page should be set in the category argument.
            The shortcode will then display all posts in that category in descending date order.
            As this is the most common use case the default arguments are designed to match this case.0
        </p>
        <pre>
            <code>
                [ACT_posts category="category-slug1,category-slug2"]
            </code>
        </pre>
        <h2>Displaying all posts</h2>
        <p>This is the use case for the News page, which numerically is the less used case.
            As category filter and sort order selections need to be shown on this page, these need to be specified as parameters.
        </p>
        <pre>
            <code>
                [act_posts]
            </code>
        </pre>
        <h2>Selecting categories via the page url</h2>
        <p>One or more categories can be passed as a page parameter in the category= parameter on the command line,
            example:
        </p>
        <code>
            <pre>
                https://test.act.stringerhj.co.uk/news/?category=carbon-cutters,energy-and-built-environment
            </pre>
        </code>
        <p>Here both the carbon-cutters and energy-and-built-environment categories will be selected</p>
        <h3>Current categories</h3>
        <p><a href="https://sites.stringerhj.co.uk/ACT/WP_plugins/category_mapping.xlsx" 
            target="_blank" >Current categories converted from legacy posts are shown in this spreadsheet</a></p>
        <h2>Displaying custom post types</h2>
        <p>Custom post types can be used to display things like team members, events, FAQs and a host of other things.
            at its simplest this is just a matter of setting the post_type attribute, as below for FAQs.
        </p>
        <pre>
            <code>
                [act_posts post_type=faq]
            </code>
        </pre>
        <p>For some post_types the control panel that appears at the top of the page is irrelevant, and so should be removed, 
            as is the case with team members
        </p>
        <pre>
            <code>
                [act_posts post_type=team has_controls=no]
            </code>
        </pre>
        <h2>Events</h2>
        <p>Events are defined as a custom post type with attributes which handle date and other special handling. 
            These are still handled as posts but have a different index which is date sorted and constructed relative to a reference date.
            For events the control panel consists of the reference date. The shortcode for events is simply:
        </p>
        <pre>
            <code>
                [act_posts post_type=event]
            </code>
        </pre>
        <h2>Custom posts - support for select fields</h2>
        <p>Any select fields defined for a custom post type are used to form a control block with select fields.
            The select fields are populated from the ACF field definition.
            Select fields are displayed in the order they are defined in the ACF field group.
            If you wish to re-order fields in the ACF field group, these can be dragged to the desired order, then the changes saved.
            How select fields are displayed depends on multiple select flag. Those with the multiple select flag set are diplsayed as a multiple select box.
        </p>
        <p>Initial values can be selected for custom post selects by using the field name as key and one or more url encoded initial values</p>
        <p>Examples:</p>
       <h3>Custom post with control block</h3> 
        <pre>
            <code>
                [act_posts post_type=act-stories has_controls=yes]
            </code>
        </pre>
        <h3>Custom post with select field with initialisation</h3>
        <pre>
            <code>
                [act_posts post_type=act-stories has_controls=yes group=Energy classification=Cutting%20out%20waste,Efficiency ]
            </code>
        </pre>
        <h2>Full set of short code parameters</h2>
        <p>The full set of short code parameters are given in the following table:</p>
        <table>
            <tr><th>Parameter</th><td>Applies to</td><th>Description</th></tr>
            <tr><td>category</td><td>posts</td><td>Category ID,slug, or name. Can also be a comma separated list of these</td></tr>
            <tr><td>sort_by</td><td></td><td>Choice of field to sort by - options are date and author</td></tr>
            <tr><td>sort_order</td><td></td><td>Choice of sort order - <ul><li>desc - descending</li><li>asc - ascending</li></ul></td></tr>
            <tr><td>excerpt_length</td><td>All</td><td>Default character limit for fallback excerpt</td></tr>
            <tr><td>post_type</td><td>All</td><td>Defaults to posts, can be team, event or any custom post type which is handled like a post</td></tr>
            <tr><td>has_controls</td><td>All</td><td>Determines if a control panel is displayed before the posts</td></tr>
            <tr><td>window_start</td><td>event</td><td>Reference date for events (not normally set)</td></tr>
            <tr><td>prompt</td><td>event</td><td>Prompt to appear before reference date (default Events from:)</td></tr>
        </table>
        <h1>Source code repository</h1>
        <p>The code for this plugin is stored in <a href="https://github.com/JulesStringer/ACT_posts" target="_blank" >https://github.com/JulesStringer/ACT_posts</a></p>

    </body>
</html>
